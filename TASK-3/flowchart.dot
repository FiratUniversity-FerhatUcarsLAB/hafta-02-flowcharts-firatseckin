digraph HastaneSistemi {
    // Grafik ayarları
    rankdir=TB;
    node [shape=box, style=rounded];
    edge [fontname="Helvetica", fontsize=10];

    // Ana Menü Düğümleri
    Start [label="Başla"];
    AnaMenu [label="Ana Menü\n1. Randevu Al\n2. Tahlil Sonucu Görüntüle\n3. Çıkış"];
    Secim [label="Seçim Yap", shape=diamond];
    Cikis [label="Çıkış"];

    // Ana Akış
    Start -> AnaMenu;
    AnaMenu -> Secim;
    Secim -> Cikis [label="3"];

    // Modül 1: Randevu Alma (Subgraph)
    subgraph cluster_randevu {
        label = "Modül 1: Randevu Alma";
        style=filled;
        color=lightgrey;
        node [style=filled, color=white];

        Randevu_Kimlik [label="Kimlik Doğrulama"];
        Randevu_Poliklinik [label="Poliklinik Seç"];
        Randevu_Doktor [label="Doktor Seç"];
        Randevu_Saat [label="Uygun Saati Göster ve Seç"];
        Randevu_Onay [label="Randevuyu Onayla", shape=diamond];
        Randevu_Kayit [label="Randevuyu Kaydet"];
        Randevu_SMS [label="SMS Gönder"];
        Randevu_Basarili [label="Randevu Başarılı"];
        Randevu_Iptal [label="İşlem İptal Edildi"];
        Randevu_Hata [label="Doğrulama Başarısız"];

        Randevu_Kimlik -> Randevu_Poliklinik [label="Doğru"];
        Randevu_Kimlik -> Randevu_Hata [label="Yanlış"];
        Randevu_Poliklinik -> Randevu_Doktor;
        Randevu_Doktor -> Randevu_Saat;
        Randevu_Saat -> Randevu_Onay;
        Randevu_Onay -> Randevu_Kayit [label="Evet"];
        Randevu_Onay -> Randevu_Iptal [label="Hayır"];
        Randevu_Kayit -> Randevu_SMS;
        Randevu_SMS -> Randevu_Basarili;
        Randevu_Basarili -> AnaMenu;
        Randevu_Iptal -> AnaMenu;
        Randevu_Hata -> AnaMenu;
    }

    // Modül 2: Tahlil Sonuçları (Subgraph)
    subgraph cluster_tahlil {
        label = "Modül 2: Tahlil Sonuçları";
        style=filled;
        color=lightcyan;
        node [style=filled, color=white];

        Tahlil_Kimlik [label="Kimlik Doğrulama"];
        Tahlil_Varlik [label="Tahlil Varlığı Kontrolü", shape=diamond];
        Tahlil_SonucHazirMi [label="Sonuç Hazır mı?", shape=diamond];
        Tahlil_Goruntule [label="Sonuçları Görüntüle"];
        Tahlil_Indir [label="PDF İndir"];
        Tahlil_Bekleme [label="Sonuç Beklemede Mesajı"];
        Tahlil_Bulunamadi [label="Tahlil Bulunamadı"];
        Tahlil_Hata [label="Doğrulama Başarısız"];

        Tahlil_Kimlik -> Tahlil_Varlik [label="Doğru"];
        Tahlil_Kimlik -> Tahlil_Hata [label="Yanlış"];
        Tahlil_Varlik -> Tahlil_SonucHazirMi [label="Var"];
        Tahlil_Varlik -> Tahlil_Bulunamadi [label="Yok"];
        Tahlil_SonucHazirMi -> Tahlil_Goruntule [label="Evet"];
        Tahlil_SonucHazirMi -> Tahlil_Bekleme [label="Hayır"];
        Tahlil_Goruntule -> Tahlil_Indir;
        Tahlil_Indir -> AnaMenu;
        Tahlil_Bekleme -> AnaMenu;
        Tahlil_Bulunamadi -> AnaMenu;
        Tahlil_Hata -> AnaMenu;
    }

    // Ana menüden modüllere geçiş
    Secim -> Randevu_Kimlik [label="1"];
    Secim -> Tahlil_Kimlik [label="2"];
}
